!function(){var e=$(".page-wrapper"),a=$('<div class="container agenda-container"></div>'),n=function(e){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e.getDay()]+", "+["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()]+" "+e.getDate()},t=function(e){return 1===e?"1st":2===e?"2nd":3===e?"3rd":e+"th"},p=function(e,a,p){var r,o=12/a,d=p.children();r=n(e),d.each(function(){$(this).removeClass(),$(this).addClass("col-sm-"+o)}),p.append($('<div class="col-sm-'+o+'"></div>').append($('<a href="#'+t(a)+'-day" class="btn btn-block btn-lg btn-info btn-agenda-day">'+r+"</a>")))},r=function(e,a,p){var r=$('<table class="table table-striped table-hover agenda-table"></table>'),o=$("<tbody>");return p.append($('<a id="'+t(a)+'-day" class="anchor"></a>')),p.append($('<div class="agenda-day"></div>').append($('<h2 class="page-header">'+n(e)+"</h2>"))),p.append(r),r.append($("<thead>").append($("<tr>").append($("<th>Time</th>")).append($("<th>Event</th>")))),r.append(o),o},o=function(e,a,n,t){var p,r;p=n(e),r=t(e),a.append($("<tr>").append(p).append(r))},d=function(e){var a=$("<td></td>");return eventTimeHtml=e.time,e.apsa&&(eventTimeHtml+=' <i class="fa fa-user-md"></i>'),a.html(eventTimeHtml)},i=function(e){var a=$("<td>"),n=e.location||"TBA";return a.append($("<p><strong>"+e.title+"</strong></p>")),a.append($("<p>Location: <em>"+n+"</em></p>")),e.description&&a.append(function(e){var a,n=$('<div class="more-less"></div>'),t=$('<p class="collapse"></p>'),p=$("<p></p>");return a=Math.floor(1e6*Math.random()+1),t.attr("id",a),t.html(e.description),p.append($('<a data-toggle="collapse" href="#'+a+'" aria-expanded="false" aria-controls="issues-panel">More</a>')),n.append(t),n.append(p),n}(e)),a},s=function(e){var a=$("<td>"),n="",t=e.location||"TBA";if(a.append($("<p><strong>"+e.title+"</strong></p>")),e.moderators&&e.moderators.length>0)for(var p=0;p<e.moderators.length;p++)p<e.moderators.length-1?n+=e.moderators[p]+", ":n+=e.moderators[p];return a.append($("<p>Session Moderators: "+n+"</p>")),a.append($("<p>Location: <em>"+t+"</em></p>")),a},l=function(e){var a=$("<td>"),n=$('<div class="row"></div>'),t=e.location||"TBA";if(e.award&&a.append($("<p><strong>"+e.award+"</strong></p>")),e.title&&a.append($("<p><strong>"+e.title+"</strong></p>")),1===e.speaker.length)a.append(c(e.speaker[0]));else if(e.speaker.length>1){a.append(n);for(var p=0;p<e.speaker.length;p++)n.append($('<div class="col-sm-6"></div>').append(c(e.speaker[p])))}return a.append($("<p>Location: <em>"+t+"</em></p>")),a},c=function(e){var a,n,t,p=$("<div>"),r=$('<div class="pull-left"></div>'),o=$('<div class="keynote-info"></div>'),d=e.speaker_type||"Invited Speaker";return n=$('<a href="../speakers/#'+m(e.name)+'"></a>'),t=$("<p><strong>"+d+"</strong>: "+e.name+"; "+e.affiliation+"</p>"),e.agenda_image&&(p.append(r),a=$('<img src="../images/keynotes/'+e.agenda_image+'" class="keynote-thumbnail img-thumbnail" />'),e.bio?r.append(n.append(a)):r.append(a)),p.append(o),e.title&&o.append($("<p><strong>"+e.title+"</strong></p>")),e.bio?o.append(n.append(t)):o.append(t),e.time&&o.append("<p>Time: <em>"+e.time+"</em></p>"),p},m=function(e){return e?e.toLowerCase().replace(/ |, |\./g,"-"):""},g=function(e){var a,n=$("<td>"),t=e.location||"TBA";n.append($('<a href="../panels/#'+v(e.title)+'"></a>').append($("<p><strong>APSA Panel: "+e.title+"</strong></p>")));for(var p=0;p<e.participant.length;p++)a=e.participant[p],n.append(u(a,a.moderator));return n.append($("<p>Location: <em>"+t+"</em></p>")),n},u=function(e,a){var n,t=$('<div class="bubble-sm"></div>'),p="bubble-image",r=e.name;return n=$('<a href="../panels/#'+m(e.name)+'"></a>'),t.append(n),a&&(p="bubble-image panel-moderator",r="Moderator: "+r),n.append($('<div class="'+p+'" style="background-image: url(../images/panels/'+e.agenda_image+');"></div>')),n.append($("<p>"+r+"</p>")),t},v=function(e){return e.toLowerCase().replace(/ |, |\./g,"-")};$(document).ready(function(){$.getJSON("../../meeting_info/meeting_info.json",function(n){if(0===n.length)e.append($("p",{class:"lead text-center"}).text("Coming Soon!"));else{var c,m,u="",v=0,f="",h=$('<div class="row"></div>'),b=d;!function(e){var a=$('<div class="top-navigation"></div>');e.append(a.append($('<p>Top <span class="glyphicon glyphicon-chevron-up"></span></p>')))}(e),e.append(a),a.append('<p><i class="fa fa-user-md fa-lg"></i> = APSA sponsored event</p>'),a.append(h);for(var y=0;y<n.length;y++){if(m=void 0,!n[y].date)throw new Error("The "+t(y)+" event must have a date");n[y].date!==u&&(v++,f=new Date(n[y].date),p(f,v,h),c=r(f,v,a),u=n[y].date),console.log("agenda day",c),"normal"===n[y].type.toLowerCase()?m=i:"session"===n[y].type.toLowerCase()?m=s:"keynote"===n[y].type.toLowerCase()?m=l:"panel"===n[y].type.toLowerCase()&&(m=g),m&&o(n[y],c,b,m)}}}).fail(function(e){console.error("Formatting error in JSON Schedule:",e)})})}();