!function(){"use strict";var e=$(".page-wrapper"),a=$('<div class="container agenda-container"></div>'),n=function(e){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e.getDay()]+", "+["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()]+" "+e.getDate()},p=function(e){return 1===e?"1st":2===e?"2nd":3===e?"3rd":e+"th"},t=function(e,a,t){var r,o=12/a,d=t.children();r=n(e),d.each(function(){$(this).removeClass(),$(this).addClass("col-sm-"+o)}),t.append($('<div class="col-sm-'+o+'"></div>').append($('<a href="#'+p(a)+'-day" class="btn btn-block btn-lg btn-info btn-agenda-day">'+r+"</a>")))},r=function(e,a,t){var r=$('<table class="table table-striped table-hover agenda-table"></table>'),o=$("<tbody>");return t.append($('<a id="'+p(a)+'-day" class="anchor"></a>')),t.append($('<div class="agenda-day"></div>').append($('<h2 class="page-header">'+n(e)+"</h2>"))),t.append(r),r.append($("<thead>").append($("<tr>").append($("<th>Time</th>")).append($("<th>Event</th>")))),r.append(o),o},o=function(e,a,n,p){var t,r;t=n(e),r=p(e),a.append($("<tr>").append(t).append(r))},d=function(e){var a,n=$("<td></td>");return a=e.time,e.apsa&&(a+=' <i class="fa fa-user-md"></i>'),n.html(a)},i=function(e){var a,n=$('<div class="more-less"></div>'),p=$('<p class="collapse"></p>'),t=$("<p></p>");return a=Math.floor(1e6*Math.random()+1),p.attr("id",a),p.html(e.description),t.append($('<a data-toggle="collapse" href="#'+a+'" aria-expanded="false" aria-controls="issues-panel">More</a>')),n.append(p),n.append(t),n},s=function(e){var a=$("<td>"),n=e.location||"TBA";return a.append($("<p><strong>"+e.title+"</strong></p>")),a.append($("<p>Location: <em>"+n+"</em></p>")),e.description&&a.append(i(e)),a},l=function(e){var a=$("<td>"),n="TBA",p=e.location||"TBA";if(a.append($("<p><strong>"+e.title+"</strong></p>")),e.moderators&&e.moderators.length>0)for(var t=0;t<e.moderators.length;t++)t<e.moderators.length-1?n+=e.moderators[t]+", ":n+=e.moderators[t];return a.append($("<p>Session Moderators: "+n+"</p>")),a.append($("<p>Location: <em>"+p+"</em></p>")),a},c=function(e){var a=$("<td>"),n=$('<div class="row"></div>'),p=e.location||"TBA";if(e.award&&a.append($("<p><strong>"+e.award+"</strong></p>")),e.title&&a.append($("<p><strong>"+e.title+"</strong></p>")),1===e.speaker.length)a.append(m(e.speaker[0],e.apsa));else if(e.speaker.length>1){a.append(n);for(var t=0;t<e.speaker.length;t++)n.append($('<div class="col-sm-6"></div>').append(m(e.speaker[t],e.apsa)))}return a.append($("<p>Location: <em>"+p+"</em></p>")),a},m=function(e,a){var n,p,t,r,o,d=$("<div>"),i=$('<div class="pull-left"></div>'),s=$('<div class="keynote-info"></div>'),l=e.speaker_type;return!e.speaker_type&&a?l="APSA Keynote Speaker":e.speaker_type||a||(l="Invited Speaker"),p=$('<a href="../speakers/#'+createSpeakerId(e.name)+'"></a>'),t=p.clone(),o=e.name&&e.affiliation?e.name+"; "+e.affiliation:e.name?e.name:"TBA",r=$("<p><strong>"+l+"</strong>: "+o+"</p>"),e.agenda_image&&(d.append(i),n=$('<img src="../images/keynotes/'+e.agenda_image+'" alt="'+e.name+'" class="keynote-thumbnail img-thumbnail" />'),e.bio?i.append(t.append(n)):i.append(n)),d.append(s),e.title&&s.append($("<p><strong>"+e.title+"</strong></p>")),e.bio?s.append(p.append(r)):s.append(r),e.time&&s.append("<p>Time: <em>"+e.time+"</em></p>"),d},g=function(e){var a,n=$("<td>"),p=e.location||"TBA";n.append($('<a href="../panels/#'+createPanelId(e.title)+'"></a>').append($("<p><strong>APSA Panel: "+e.title+"</strong></p>")));for(var t=0;t<e.participant.length;t++)a=e.participant[t],n.append(u(a,a.moderator));return n.append($("<p>Location: <em>"+p+"</em></p>")),e.description&&n.append(i(e.description)),n},u=function(e,a){var n,p=$('<div class="bubble-sm"></div>'),t="bubble-image",r=e.name;return n=$('<a href="../panels/#'+createSpeakerId(e.name)+'"></a>'),p.append(n),a&&(t="bubble-image panel-moderator",r="Moderator: "+r),n.append($('<div class="'+t+'" style="background-image: url(../images/panels/'+e.agenda_image+');"></div>')),n.append($("<p>"+r+"</p>")),p};$(document).ready(function(){$.getJSON("../../meeting_info/meeting_info.json",function(n){if(0===n.length)e.append($('<p class="lead text-center">Coming Soon!</p>'));else{var i,m,u="",v=0,f="",h=$('<div class="row"></div>'),y=d;!function(e){var a=$('<div class="top-navigation"></div>');e.append(a.append($('<p>Top <span class="glyphicon glyphicon-chevron-up"></span></p>')))}(e),e.append(a),a.append('<p><i class="fa fa-user-md fa-lg"></i> = APSA sponsored event</p>'),a.append(h);for(var b=0;b<n.length;b++)m=void 0,n[b].date!==u&&(v++,f=new Date(n[b].date),t(f,v,h),i=r(f,v,a),u=n[b].date),n[b].date&&n[b].time?("normal"===n[b].type.toLowerCase()?m=s:"session"===n[b].type.toLowerCase()?m=l:"keynote"===n[b].type.toLowerCase()?m=c:"panel"===n[b].type.toLowerCase()&&(m=g),o(n[b],i,y,m)):console.error("The "+p(b)+" event must have a date and time")}window.location.href=window.location.hash}).fail(function(e){console.error("Formatting error in JSON Schedule:",e)})})}();