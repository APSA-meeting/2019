!function(){"use strict";var e=$(".page-wrapper"),a=$('<div class="container agenda-container"></div>'),n=function(e){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e.getDay()]+", "+["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()]+" "+e.getDate()},t=function(e){return 1===e?"1st":2===e?"2nd":3===e?"3rd":e+"th"},p=function(e,a,p){var r,o=12/a,d=p.children();r=n(e),d.each(function(){$(this).removeClass(),$(this).addClass("col-sm-"+o)}),p.append($('<div class="col-sm-'+o+'"></div>').append($('<a href="#'+t(a)+'-day" class="btn btn-block btn-lg btn-info btn-agenda-day">'+r+"</a>")))},r=function(e,a,p){var r=$('<table class="table table-striped table-hover agenda-table"></table>'),o=$("<tbody>");return p.append($('<a id="'+t(a)+'-day" class="anchor"></a>')),p.append($('<div class="agenda-day"></div>').append($('<h2 class="page-header">'+n(e)+"</h2>"))),p.append(r),r.append($("<thead>").append($("<tr>").append($("<th>Time</th>")).append($("<th>Event</th>")))),r.append(o),o},o=function(e,a,n,t){var p,r;p=n(e),r=t(e),a.append($("<tr>").append(p).append(r))},d=function(e){var a,n=$("<td></td>");return a=e.time,e.apsa&&(a+=' <i class="fa fa-user-md"></i>'),n.html(a)},i=function(e){var a,n=$('<div class="more-less"></div>'),t=$('<p class="collapse"></p>'),p=$("<p></p>");return a=Math.floor(1e6*Math.random()+1),t.attr("id",a),t.html(e.description),p.append($('<a data-toggle="collapse" href="#'+a+'" aria-expanded="false" aria-controls="issues-panel">More</a>')),n.append(t),n.append(p),n},s=function(e){var a=$("<td>"),n=e.location||"TBA";return a.append($("<p><strong>"+e.title+"</strong></p>")),a.append($("<p>Location: <em>"+n+"</em></p>")),e.description&&a.append(i(e)),a},l=function(e){var a=$("<td>"),n="TBA",t=e.location||"TBA";if(a.append($("<p><strong>"+e.title+"</strong></p>")),e.moderators&&e.moderators.length>0)for(var p=0;p<e.moderators.length;p++)p<e.moderators.length-1?n+=e.moderators[p]+", ":n+=e.moderators[p];return a.append($("<p>Session Moderators: "+n+"</p>")),a.append($("<p>Location: <em>"+t+"</em></p>")),a},c=function(e){var a=$("<td>"),n=$('<div class="row"></div>'),t=e.location||"TBA";if(e.award&&a.append($("<p><strong>"+e.award+"</strong></p>")),e.title&&a.append($("<p><strong>"+e.title+"</strong></p>")),1===e.speaker.length)a.append(m(e.speaker[0],e.apsa));else if(e.speaker.length>1){a.append(n);for(var p=0;p<e.speaker.length;p++)n.append($('<div class="col-sm-6" style="clear: none;"></div>').append(m(e.speaker[p],e.apsa))),p>0&&p%2==1&&(console.log("more than 2 speakers"),n.append($('<div class="clearfix hidden-xs"></div>')))}return a.append($("<p>Location: <em>"+t+"</em></p>")),a},m=function(e,a){var n,t,p,r,o,d=$("<div>"),i=$('<div class="pull-left"></div>'),s=$('<div class="keynote-info"></div>'),l=e.speaker_type;return!e.speaker_type&&a?l="APSA Keynote Speaker":e.speaker_type||a||(l="Invited Speaker"),t=$('<a href="../speakers/#'+createSpeakerId(e.name)+'"></a>'),p=t.clone(),o=e.name&&e.affiliation?e.name+"; "+e.affiliation:e.name?e.name:"TBA",r=$("<p><strong>"+l+"</strong>: "+o+"</p>"),e.agenda_image&&(d.append(i),n=$('<img src="../images/keynotes/'+e.agenda_image+'" alt="'+e.name+'" class="keynote-thumbnail img-thumbnail" />'),e.bio?i.append(p.append(n)):i.append(n)),d.append(s),e.title&&s.append($("<p><strong>"+e.title+"</strong></p>")),e.bio?s.append(t.append(r)):s.append(r),e.time&&s.append("<p>Time: <em>"+e.time+"</em></p>"),d},g=function(e){var a,n=$("<td>"),t=e.location||"TBA";n.append($('<a href="../panels/#'+createPanelId(e.title)+'"></a>').append($("<p><strong>APSA Panel: "+e.title+"</strong></p>")));for(var p=0;p<e.participant.length;p++)a=e.participant[p],n.append(u(a,a.moderator));return n.append($("<p>Location: <em>"+t+"</em></p>")),e.description&&n.append(i(e.description)),n},u=function(e,a){var n,t=$('<div class="bubble-sm"></div>'),p="bubble-image",r=e.name;return n=$('<a href="../panels/#'+createSpeakerId(e.name)+'"></a>'),t.append(n),a&&(p="bubble-image panel-moderator",r="Moderator: "+r),n.append($('<div class="'+p+'" style="background-image: url(../images/panels/'+e.agenda_image+');"></div>')),n.append($("<p>"+r+"</p>")),t};$(document).ready(function(){$.getJSON("../../meeting_info/meeting_info.json",function(n){if(0===n.length)e.append($('<p class="lead text-center">Coming Soon!</p>'));else{var i,m,u="",v=0,h="",f=$('<div class="row"></div>'),y=d;!function(e){var a=$('<div class="top-navigation"></div>');e.append(a.append($('<p>Top <span class="glyphicon glyphicon-chevron-up"></span></p>')))}(e),e.append(a),a.append('<p><i class="fa fa-user-md fa-lg"></i> = APSA sponsored event</p>'),a.append(f);for(var b=0;b<n.length;b++)m=void 0,n[b].date!==u&&(v++,h=new Date(n[b].date),p(h,v,f),i=r(h,v,a),u=n[b].date),n[b].date&&n[b].time?("normal"===n[b].type.toLowerCase()?m=s:"session"===n[b].type.toLowerCase()?m=l:"keynote"===n[b].type.toLowerCase()?m=c:"panel"===n[b].type.toLowerCase()&&(m=g),o(n[b],i,y,m)):console.error("The "+t(b)+" event must have a date and time")}location.hash&&document.getElementById(location.hash.slice(1)).scrollIntoView(!0,{behavior:"smooth"});var k=agenda_ui();window.onscroll=k.createTopScrollButton,k.createUiAnimations()}).fail(function(e){console.error("Formatting error in JSON Schedule:",e)})})}();